const menuBurger=document.querySelector(".menu-mobile__burger"),menuBox=document.querySelector(".menu-mobile__box");menuBurger.addEventListener("click",e=>{e.preventDefault(),menuBox.classList.toggle("active"),menuBurger.classList.toggle("active")});const accordion=document.querySelectorAll(".accordion-box__content");accordion.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();let o=e.querySelectorAll(".accordion-box__content-text");o.forEach(e=>{e.style.maxHeight?(e.style.maxHeight=null,e.style.marginTop="0px"):(e.style.maxHeight=e.scrollHeight+"px",e.style.marginTop="25px")})})});const btnRegister=document.querySelectorAll(".header__right-btn--registration"),btnEnter=document.querySelectorAll(".header__right-btn--enter");function openPopup(e){let t=document.querySelector(e);t.classList.add("open"),document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.left="0",document.body.style.right="0",t.addEventListener("click",e=>{e.target===t&&(t.classList.remove("open"),document.body.style.overflow="auto",document.body.style.position="unset",document.body.style.left="unset",document.body.style.right="unset")})}function closePopup(e){let t=document.querySelectorAll(".modal__btn-close"),o=document.querySelector(e);t.forEach(e=>{e.addEventListener("click",()=>{o.classList.remove("open"),document.body.style.overflow="auto",document.body.style.position="unset",document.body.style.left="unset",document.body.style.right="unset"})})}function initFlagDropdown(){let e=document.querySelectorAll(".dropdown__item-link"),t=document.querySelector(".header__right-icon"),o=document.querySelector(".menu-mobile__box .header__right-icon"),l=document.querySelector(".header__right-language .dropdown__list"),r=document.querySelector(".menu-mobile__box .dropdown__list");t&&t.addEventListener("click",e=>{e.preventDefault(),l&&l.classList.toggle("active")}),o&&o.addEventListener("click",e=>{e.preventDefault(),r&&r.classList.toggle("active")}),e.forEach(e=>{e.addEventListener("click",l=>{l.preventDefault();let r=e.querySelector("img");if(r){let n=r.src,s=r.alt||"flag",c=e.getAttribute("data-btn"),i={ru:"ru",en:"en",de:"de",fr:"fr"}[c]||"ru";t&&(t.src=n,t.alt=s),o&&(o.src=n,o.alt=s),localStorage.setItem("selectedFlag",JSON.stringify({src:n,alt:s,language:i})),"function"==typeof changeLanguage&&changeLanguage(i);let a=e.closest(".dropdown__list");a&&a.classList.remove("active")}})});let n=localStorage.getItem("selectedFlag");if(n)try{let s=JSON.parse(n);t&&(t.src=s.src,t.alt=s.alt),o&&(o.src=s.src,o.alt=s.alt),s.language&&"function"==typeof changeLanguage&&changeLanguage(s.language)}catch(c){console.log("Ошибка при загрузке сохраненного флага:",c)}}btnRegister.forEach(e=>{e.addEventListener("click",()=>{openPopup("#popup-register"),closePopup("#popup-register")})}),btnEnter.forEach(e=>{e.addEventListener("click",()=>{openPopup("#popup-enter"),closePopup("#popup-enter")})}),document.addEventListener("DOMContentLoaded",initFlagDropdown);